2025-04-10 19:53:33 [INFO] root: Logging configured successfully
2025-04-10 19:53:33 [DEBUG] asyncio: Using selector: EpollSelector
2025-04-10 19:53:33 [INFO] __main__: Initializing database connection...
2025-04-10 19:53:33 [INFO] bot.data.db_manager: Attempting to connect to database customer_990306_bet_tracker_bot at na01-sql.pebblehost.com:3306
2025-04-10 19:53:34 [INFO] bot.data.db_manager: Database connection pool initialized successfully
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 1...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 2...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 3...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 4...
2025-04-10 19:53:34 [INFO] bot.data.db_manager: Database tables checked/created successfully
2025-04-10 19:53:34 [INFO] __main__: Initializing cache connection...
2025-04-10 19:53:34 [INFO] bot.data.cache_manager: Attempting to connect to Redis at redis-14768.c246.us-east-1-4.ec2.redns.redis-cloud.com:14768
2025-04-10 19:53:34 [INFO] bot.data.cache_manager: Redis connection initialized successfully
2025-04-10 19:53:34 [INFO] __main__: Starting database logo synchronization...
2025-04-10 19:53:34 [INFO] bot.utils.image_utils.helpers: Starting logo synchronization from database...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Fetching DB query: SELECT league, conference, team, logo_image FROM league_teams_logos with params: None
2025-04-10 19:53:34 [ERROR] bot.data.db_manager: Database query fetch failed: SELECT league, conference, team, logo_image FROM league_teams_logos | Params: None | Error: (1146, "Table 'customer_990306_bet_tracker_bot.league_teams_logos' doesn't exist")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'customer_990306_bet_tracker_bot.league_teams_logos' doesn't exist")
2025-04-10 19:53:34 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1146, "Table 'customer_990306_bet_tracker_bot.league_teams_logos' doesn't exist") | Query: SELECT league, conference, team, logo_image FROM league_teams_logos
2025-04-10 19:53:34 [ERROR] bot.utils.errors: DatabaseQueryError: Database query or processing failed during logo sync | Query: SELECT league, conference, team, logo_image FROM league_teams_logos
2025-04-10 19:53:34 [INFO] bot.data.db_manager: Database connection pool closed
2025-04-10 19:53:34 [DEBUG] bot.utils.image_utils.helpers: Database connection closed after logo synchronization.
2025-04-10 19:53:34 [ERROR] __main__: ERROR during logo synchronization: Database query or processing failed during logo sync | Query: SELECT league, conference, team, logo_image FROM league_teams_logos
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'customer_990306_bet_tracker_bot.league_teams_logos' doesn't exist")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/utils/image_utils/logo_sync.py", line 27, in sync_logos_from_db
    results = await db_manager.fetch(query)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1146, "Table 'customer_990306_bet_tracker_bot.league_teams_logos' doesn't exist") | Query: SELECT league, conference, team, logo_image FROM league_teams_logos

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/main.py", line 34, in main
    await sync_logos_from_db()
  File "/home/container/bot/utils/image_utils/logo_sync.py", line 134, in sync_logos_from_db
    raise DatabaseQueryError(
bot.utils.errors.DatabaseQueryError: Database query or processing failed during logo sync | Query: SELECT league, conference, team, logo_image FROM league_teams_logos
2025-04-10 19:53:34 [INFO] __main__: Initializing BettingBot...
2025-04-10 19:53:34 [INFO] __main__: Starting bot...
2025-04-10 19:53:34 [INFO] bot.data.db_manager: Attempting to connect to database customer_990306_bet_tracker_bot at na01-sql.pebblehost.com:3306
2025-04-10 19:53:34 [INFO] bot.data.db_manager: Database connection pool initialized successfully
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 1...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 2...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 3...
2025-04-10 19:53:34 [DEBUG] bot.data.db_manager: Executing setup query 4...
2025-04-10 19:53:34 [INFO] bot.data.db_manager: Database tables checked/created successfully
2025-04-10 19:53:34 [DEBUG] bot.data.cache_manager: Redis connection already active.
2025-04-10 19:53:34 [INFO] api.sports_api: Sports API client session started
2025-04-10 19:53:34 [INFO] bot.services.game_service: Fetching initial game data for pending bets...
2025-04-10 19:53:34 [WARNING] data.db_manager: Database pool closed or not initialized. Attempting to reconnect.
2025-04-10 19:53:34 [INFO] data.db_manager: Attempting to connect to database customer_990306_bet_tracker_bot at na01-sql.pebblehost.com:3306
2025-04-10 19:53:34 [INFO] data.db_manager: Database connection pool initialized successfully
2025-04-10 19:53:34 [DEBUG] data.db_manager: Executing setup query 1...
2025-04-10 19:53:34 [DEBUG] data.db_manager: Executing setup query 2...
2025-04-10 19:53:34 [DEBUG] data.db_manager: Executing setup query 3...
2025-04-10 19:53:34 [DEBUG] data.db_manager: Executing setup query 4...
2025-04-10 19:53:34 [INFO] data.db_manager: Database tables checked/created successfully
2025-04-10 19:53:34 [DEBUG] data.db_manager: Fetching DB query: 
                SELECT DISTINCT event_id, league, team, opponent, game_start
                FROM bets
                WHERE event_id IS NOT NULL
                  AND bet_won IS NULL
                  AND bet_loss IS NULL
             with params: None
2025-04-10 19:53:34 [ERROR] data.db_manager: Database query fetch failed: 
                SELECT DISTINCT event_id, league, team, opponent, game_start
                FROM bets
                WHERE event_id IS NOT NULL
                  AND bet_won IS NULL
                  AND bet_loss IS NULL
             | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:53:34 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                SELECT DISTINCT event_id, league, team, opponent, game_start
                FROM bets
                WHERE event_id IS NOT NULL
                  AND bet_won IS NULL
                  AND bet_loss IS NULL
            
2025-04-10 19:53:34 [ERROR] bot.services.game_service: Database error fetching initial games: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                SELECT DISTINCT event_id, league, team, opponent, game_start
                FROM bets
                WHERE event_id IS NOT NULL
                  AND bet_won IS NULL
                  AND bet_loss IS NULL
            
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/game_service.py", line 52, in _fetch_initial_games
    pending_bets = await db_manager.fetch(query)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                SELECT DISTINCT event_id, league, team, opponent, game_start
                FROM bets
                WHERE event_id IS NOT NULL
                  AND bet_won IS NULL
                  AND bet_loss IS NULL
            
2025-04-10 19:53:34 [INFO] bot.services.game_service: Game service polling started.
2025-04-10 19:53:34 [INFO] bot.services.voice_service: Voice service update loop started.
2025-04-10 19:53:34 [INFO] web.server: Web application setup complete.
2025-04-10 19:53:34 [INFO] bot.core: Loading application commands...
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: add_capper
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: admin
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: cancel_bet
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: help
2025-04-10 19:53:34 [DEBUG] matplotlib: matplotlib data path: /home/container/.local/lib/python3.12/site-packages/matplotlib/mpl-data
2025-04-10 19:53:34 [DEBUG] matplotlib: CONFIGDIR=/home/container/.config/matplotlib
2025-04-10 19:53:34 [DEBUG] matplotlib: interactive is False
2025-04-10 19:53:34 [DEBUG] matplotlib: platform is linux
2025-04-10 19:53:34 [DEBUG] matplotlib: CACHEDIR=/home/container/.cache/matplotlib
2025-04-10 19:53:34 [DEBUG] matplotlib.font_manager: Using fontManager instance from /home/container/.cache/matplotlib/fontlist-v390.json
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: leaderboard
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: load_url
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: profile
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: setid
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: show_cappers
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: stats
2025-04-10 19:53:34 [INFO] bot.core: Loaded command: subscription
2025-04-10 19:53:34 [INFO] bot.core: Assuming 'bet' command is handled by BetService internally.
2025-04-10 19:53:34 [INFO] bot.core: Application commands loaded.
2025-04-10 19:53:34 [INFO] web.server: Web server started at http://0.0.0.0:20900/
2025-04-10 19:53:35 [INFO] bot.core: Commands synced to test guild ID: 1328126227013439601
2025-04-10 19:53:37 [INFO] bot.services.voice_service: Voice service entering update loop.
2025-04-10 19:53:37 [DEBUG] bot.services.voice_service: Voice service sleeping for 83.00 seconds until next 5-min mark.
2025-04-10 19:53:37 [INFO] bot.core: Logged in as Bet Embed Generator (ID: 1341993312915034153)
2025-04-10 19:53:37 [INFO] bot.core: Discord.py version: 2.3.2
2025-04-10 19:53:37 [INFO] bot.core: Bot is ready and online.
2025-04-10 19:53:39 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:53:39 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:53:39 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:53:39 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:53:39 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:54:39 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:54:39 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:54:39 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:54:39 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:54:39 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:55:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 19:55:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 19:55:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 19:55:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 19:55:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 19:55:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 19:55:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 19, 55, 0, 455135, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 19, 55, 0, 455135, tzinfo=datetime.timezone.utc))
2025-04-10 19:55:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 19, 55, 0, 455135, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 19, 55, 0, 455135, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:55:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 19:55:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 19:55:39 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:55:39 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:55:39 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:55:39 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:55:39 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:56:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 19:56:39 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:56:39 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:56:39 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:56:39 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:56:39 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:57:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:57:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:57:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:57:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:57:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:58:36 [WARNING] bot.core: Bot disconnected.
2025-04-10 19:58:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:58:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:58:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:58:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:58:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:59:36 [ERROR] discord.client: Attempting a reconnect in 0.39s
Traceback (most recent call last):
  File "/python/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/discord/gateway.py", line 372, in from_client
    socket = await client.http.ws_connect(str(url))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/discord/http.py", line 537, in ws_connect
    return await self.__session.ws_connect(url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiohttp/client.py", line 835, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiohttp/client.py", line 608, in _request
    await resp.start(conn)
  File "/home/container/.local/lib/python3.12/site-packages/aiohttp/client_reqrep.py", line 976, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiohttp/streams.py", line 640, in read
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/container/.local/lib/python3.12/site-packages/discord/client.py", line 656, in connect
    self.ws = await asyncio.wait_for(coro, timeout=60.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/python/lib/python3.12/asyncio/tasks.py", line 519, in wait_for
    async with timeouts.timeout(timeout):
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/python/lib/python3.12/asyncio/timeouts.py", line 115, in __aexit__
    raise TimeoutError from exc_val
TimeoutError
2025-04-10 19:59:36 [WARNING] bot.core: Bot disconnected.
2025-04-10 19:59:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 19:59:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 19:59:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 19:59:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:59:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 19:59:47 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:00:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:00:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:00:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:00:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:00:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:00:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:00:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 0, 0, 486680, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 0, 0, 486680, tzinfo=datetime.timezone.utc))
2025-04-10 20:00:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 0, 0, 486680, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 0, 0, 486680, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:00:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:00:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:00:33 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:00:38 [ERROR] discord.client: Attempting a reconnect in 1.58s
Traceback (most recent call last):
  File "/home/container/.local/lib/python3.12/site-packages/discord/client.py", line 656, in connect
    self.ws = await asyncio.wait_for(coro, timeout=60.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/python/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/discord/gateway.py", line 372, in from_client
    socket = await client.http.ws_connect(str(url))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/discord/http.py", line 537, in ws_connect
    return await self.__session.ws_connect(url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiohttp/client.py", line 851, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 520, message='Invalid response status', url=URL('wss://gateway.discord.gg/?v=10&encoding=json&compress=zlib-stream')
2025-04-10 20:00:38 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:00:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:00:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:00:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:00:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:00:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:00:47 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:01:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:01:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:01:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:01:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:01:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:01:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:02:24 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:02:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:02:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:02:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:02:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:02:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:03:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:03:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:03:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:03:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:03:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:04:02 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:04:35 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:04:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:04:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:04:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:04:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:04:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:05:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:05:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:05:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:05:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:05:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:05:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:05:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 5, 0, 520407, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 5, 0, 520407, tzinfo=datetime.timezone.utc))
2025-04-10 20:05:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 5, 0, 520407, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 5, 0, 520407, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:05:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:05:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:05:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:05:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:05:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:05:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:05:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:06:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:06:27 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:06:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:06:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:06:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:06:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:06:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:07:34 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:07:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:07:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:07:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:07:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:07:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:08:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:08:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:08:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:08:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:08:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:09:16 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:09:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:09:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:09:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:09:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:09:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:10:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:10:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:10:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:10:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:10:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:10:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:10:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 10, 0, 530342, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 10, 0, 530342, tzinfo=datetime.timezone.utc))
2025-04-10 20:10:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 10, 0, 530342, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 10, 0, 530342, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:10:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:10:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:10:17 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:10:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:10:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:10:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:10:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:10:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:11:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:11:29 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:11:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:11:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:11:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:11:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:11:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:12:11 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:12:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:12:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:12:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:12:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:12:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:13:21 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:13:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:13:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:13:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:13:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:13:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:14:16 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:14:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:14:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:14:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:14:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:14:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:15:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:15:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:15:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:15:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:15:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:15:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:15:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 15, 0, 540583, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 15, 0, 540583, tzinfo=datetime.timezone.utc))
2025-04-10 20:15:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 15, 0, 540583, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 15, 0, 540583, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:15:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:15:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:15:10 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:15:37 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:15:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:15:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:15:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:15:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:15:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:16:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:16:03 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:16:36 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:16:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:16:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:16:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:16:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:16:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:17:20 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:17:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:17:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:17:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:17:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:17:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:17:45 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:18:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:18:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:18:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:18:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:18:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:19:10 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:19:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:19:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:19:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:19:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:19:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:20:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:20:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:20:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:20:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:20:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:20:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:20:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 20, 0, 574340, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 20, 0, 574340, tzinfo=datetime.timezone.utc))
2025-04-10 20:20:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 20, 0, 574340, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 20, 0, 574340, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:20:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:20:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:20:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:20:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:20:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:20:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:20:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:21:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:21:13 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:21:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:21:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:21:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:21:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:21:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:22:24 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:22:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:22:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:22:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:22:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:22:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:23:35 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:23:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:23:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:23:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:23:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:23:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:24:09 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:24:19 [INFO] bot.core: Logged in as Bet Embed Generator (ID: 1341993312915034153)
2025-04-10 20:24:19 [INFO] bot.core: Discord.py version: 2.3.2
2025-04-10 20:24:19 [INFO] bot.core: Bot is ready and online.
2025-04-10 20:24:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:24:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:24:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:24:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:24:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:25:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:25:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:25:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:25:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:25:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:25:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:25:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 25, 0, 610407, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 25, 0, 610407, tzinfo=datetime.timezone.utc))
2025-04-10 20:25:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 25, 0, 610407, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 25, 0, 610407, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:25:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:25:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:25:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:25:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:25:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:25:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:25:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:26:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:26:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:26:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:26:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:26:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:26:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:27:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:27:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:27:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:27:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:27:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:28:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:28:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:28:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:28:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:28:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:29:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:29:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:29:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:29:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:29:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:30:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:30:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:30:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:30:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:30:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:30:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:30:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 30, 0, 657497, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 30, 0, 657497, tzinfo=datetime.timezone.utc))
2025-04-10 20:30:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 30, 0, 657497, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 30, 0, 657497, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:30:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:30:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:30:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:30:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:30:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:30:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:30:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:31:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:31:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:31:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:31:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:31:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:31:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:32:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:32:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:32:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:32:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:32:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:33:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:33:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:33:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:33:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:33:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:34:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:34:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:34:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:34:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:34:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:35:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:35:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:35:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:35:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:35:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:35:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:35:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 35, 0, 704465, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 35, 0, 704465, tzinfo=datetime.timezone.utc))
2025-04-10 20:35:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 35, 0, 704465, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 35, 0, 704465, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:35:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:35:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:35:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:35:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:35:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:35:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:35:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:36:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:36:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:36:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:36:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:36:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:36:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:37:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:37:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:37:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:37:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:37:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:38:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:38:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:38:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:38:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:38:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:39:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:39:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:39:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:39:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:39:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:40:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:40:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:40:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:40:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:40:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:40:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:40:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 40, 0, 723546, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 40, 0, 723546, tzinfo=datetime.timezone.utc))
2025-04-10 20:40:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 40, 0, 723546, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 40, 0, 723546, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:40:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:40:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:40:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:40:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:40:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:40:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:40:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:41:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:41:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:41:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:41:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:41:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:41:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:42:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:42:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:42:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:42:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:42:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:43:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:43:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:43:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:43:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:43:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:44:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:44:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:44:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:44:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:44:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:45:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:45:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:45:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:45:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:45:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:45:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:45:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 45, 0, 764217, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 45, 0, 764217, tzinfo=datetime.timezone.utc))
2025-04-10 20:45:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 45, 0, 764217, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 45, 0, 764217, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:45:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:45:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:45:37 [WARNING] bot.core: Bot disconnected.
2025-04-10 20:45:37 [INFO] bot.core: Bot resumed connection.
2025-04-10 20:45:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:45:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:45:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:45:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:45:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:46:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:46:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:46:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:46:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:46:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:46:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:47:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:47:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:47:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:47:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:47:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:48:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:48:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:48:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:48:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:48:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:49:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:49:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:49:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:49:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:49:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:50:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:50:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:50:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:50:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:50:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:50:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:50:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 50, 0, 809118, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 50, 0, 809118, tzinfo=datetime.timezone.utc))
2025-04-10 20:50:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 50, 0, 809118, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 50, 0, 809118, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:50:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:50:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:50:40 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:50:40 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:50:40 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:50:40 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:50:40 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:51:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:51:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:51:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:51:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:51:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:51:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:52:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:52:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:52:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:52:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:52:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:53:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:53:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:53:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:53:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:53:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:54:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:54:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:54:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:54:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:54:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:55:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 20:55:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 20:55:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 20:55:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 20:55:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 20:55:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 20:55:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 55, 0, 855544, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 55, 0, 855544, tzinfo=datetime.timezone.utc))
2025-04-10 20:55:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 20, 55, 0, 855544, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 20, 55, 0, 855544, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:55:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 20:55:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 20:55:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:55:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:55:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:55:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:55:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:56:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 20:56:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:56:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:56:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:56:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:56:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:57:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:57:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:57:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:57:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:57:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:58:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:58:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:58:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:58:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:58:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:59:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 20:59:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 20:59:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 20:59:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 20:59:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:00:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:00:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:00:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:00:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:00:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:00:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:00:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 0, 0, 869627, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 0, 0, 869627, tzinfo=datetime.timezone.utc))
2025-04-10 21:00:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 0, 0, 869627, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 0, 0, 869627, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:00:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:00:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:00:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:00:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:00:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:00:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:00:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:01:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:01:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:01:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:01:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:01:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:01:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:02:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:02:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:02:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:02:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:02:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:03:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:03:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:03:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:03:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:03:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:04:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:04:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:04:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:04:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:04:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:05:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:05:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:05:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:05:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:05:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:05:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:05:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 5, 0, 903551, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 5, 0, 903551, tzinfo=datetime.timezone.utc))
2025-04-10 21:05:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 5, 0, 903551, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 5, 0, 903551, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:05:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:05:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:05:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:05:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:05:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:05:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:05:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:06:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:06:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:06:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:06:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:06:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:06:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:07:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:07:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:07:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:07:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:07:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:08:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:08:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:08:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:08:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:08:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:09:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:09:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:09:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:09:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:09:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:10:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:10:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:10:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:10:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:10:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:10:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:10:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 10, 0, 949857, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 10, 0, 949857, tzinfo=datetime.timezone.utc))
2025-04-10 21:10:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 10, 0, 949857, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 10, 0, 949857, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:10:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:10:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:10:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:10:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:10:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:10:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:10:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:11:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:11:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:11:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:11:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:11:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:11:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:12:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:12:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:12:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:12:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:12:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:12:51 [WARNING] bot.core: Bot disconnected.
2025-04-10 21:12:51 [INFO] bot.core: Bot resumed connection.
2025-04-10 21:13:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:13:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:13:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:13:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:13:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:14:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:14:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:14:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:14:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:14:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:15:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:15:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:15:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:15:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:15:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:15:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:15:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 15, 0, 984287, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 15, 0, 984287, tzinfo=datetime.timezone.utc))
2025-04-10 21:15:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 15, 0, 984287, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 15, 0, 984287, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:15:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:15:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:15:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:15:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:15:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:15:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:15:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:16:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:16:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:16:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:16:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:16:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:16:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:17:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:17:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:17:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:17:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:17:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:18:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:18:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:18:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:18:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:18:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:19:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:19:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:19:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:19:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:19:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:20:01 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:20:01 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:20:01 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:20:01 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:20:01 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:20:01 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:20:01 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 20, 1, 11548, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 20, 1, 11548, tzinfo=datetime.timezone.utc))
2025-04-10 21:20:01 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 20, 1, 11548, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 20, 1, 11548, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:20:01 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:20:01 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:20:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:20:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:20:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:20:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:20:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:21:01 [DEBUG] bot.services.voice_service: Voice service sleeping for 239.00 seconds until next 5-min mark.
2025-04-10 21:21:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:21:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:21:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:21:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:21:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:22:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:22:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:22:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:22:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:22:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:23:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:23:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:23:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:23:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:23:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:24:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:24:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:24:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:24:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:24:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:25:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:25:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:25:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:25:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:25:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:25:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:25:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 25, 0, 58452, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 25, 0, 58452, tzinfo=datetime.timezone.utc))
2025-04-10 21:25:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 25, 0, 58452, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 25, 0, 58452, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:25:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:25:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:25:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:25:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:25:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:25:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:25:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:26:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:26:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:26:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:26:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:26:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:26:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:27:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:27:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:27:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:27:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:27:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:28:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:28:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:28:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:28:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:28:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:29:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:29:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:29:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:29:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:29:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:30:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:30:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:30:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:30:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:30:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:30:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:30:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 30, 0, 88241, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 30, 0, 88241, tzinfo=datetime.timezone.utc))
2025-04-10 21:30:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 30, 0, 88241, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 30, 0, 88241, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:30:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:30:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:30:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:30:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:30:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:30:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:30:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:31:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:31:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:31:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:31:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:31:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:31:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:32:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:32:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:32:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:32:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:32:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:33:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:33:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:33:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:33:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:33:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:34:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:34:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:34:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:34:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:34:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:35:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:35:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:35:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:35:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:35:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:35:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:35:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 35, 0, 107408, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 35, 0, 107408, tzinfo=datetime.timezone.utc))
2025-04-10 21:35:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 35, 0, 107408, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 35, 0, 107408, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:35:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:35:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:35:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:35:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:35:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:35:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:35:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:36:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:36:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:36:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:36:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:36:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:36:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:37:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:37:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:37:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:37:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:37:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:38:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:38:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:38:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:38:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:38:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:39:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:39:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:39:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:39:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:39:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:40:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:40:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:40:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:40:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:40:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:40:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:40:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 40, 0, 153493, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 40, 0, 153493, tzinfo=datetime.timezone.utc))
2025-04-10 21:40:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 40, 0, 153493, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 40, 0, 153493, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:40:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:40:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:40:41 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:40:41 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:40:41 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:40:41 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:40:41 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:41:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:41:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:41:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:41:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:41:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:41:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:42:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:42:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:42:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:42:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:42:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:43:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:43:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:43:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:43:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:43:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:44:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:44:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:44:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:44:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:44:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:45:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:45:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:45:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:45:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:45:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:45:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:45:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 45, 0, 187466, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 45, 0, 187466, tzinfo=datetime.timezone.utc))
2025-04-10 21:45:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 45, 0, 187466, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 45, 0, 187466, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:45:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:45:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:45:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:45:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:45:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:45:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:45:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:46:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:46:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:46:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:46:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:46:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:46:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:47:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:47:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:47:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:47:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:47:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:48:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:48:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:48:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:48:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:48:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:49:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:49:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:49:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:49:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:49:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:50:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:50:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:50:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:50:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:50:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:50:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:50:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 50, 0, 204347, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 50, 0, 204347, tzinfo=datetime.timezone.utc))
2025-04-10 21:50:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 50, 0, 204347, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 50, 0, 204347, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:50:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:50:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:50:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:50:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:50:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:50:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:50:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:51:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:51:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:51:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:51:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:51:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:51:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:52:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:52:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:52:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:52:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:52:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:53:37 [WARNING] bot.core: Bot disconnected.
2025-04-10 21:53:37 [INFO] bot.core: Bot resumed connection.
2025-04-10 21:53:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:53:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:53:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:53:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:53:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:54:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:54:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:54:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:54:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:54:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:55:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 21:55:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 21:55:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 21:55:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 21:55:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 21:55:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 21:55:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 55, 0, 242441, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 55, 0, 242441, tzinfo=datetime.timezone.utc))
2025-04-10 21:55:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 21, 55, 0, 242441, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 21, 55, 0, 242441, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:55:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 21:55:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 21:55:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:55:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:55:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:55:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:55:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:56:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 21:56:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:56:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:56:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:56:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:56:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:57:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:57:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:57:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:57:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:57:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:58:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:58:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:58:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:58:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:58:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:59:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 21:59:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 21:59:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 21:59:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 21:59:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:00:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:00:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:00:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:00:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:00:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:00:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:00:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 0, 0, 278352, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 0, 0, 278352, tzinfo=datetime.timezone.utc))
2025-04-10 22:00:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 0, 0, 278352, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 0, 0, 278352, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:00:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:00:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:00:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:00:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:00:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:00:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:00:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:01:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:01:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:01:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:01:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:01:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:01:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:02:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:02:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:02:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:02:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:02:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:03:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:03:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:03:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:03:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:03:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:04:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:04:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:04:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:04:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:04:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:05:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:05:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:05:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:05:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:05:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:05:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:05:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 5, 0, 321149, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 5, 0, 321149, tzinfo=datetime.timezone.utc))
2025-04-10 22:05:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 5, 0, 321149, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 5, 0, 321149, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:05:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:05:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:05:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:05:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:05:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:05:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:05:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:06:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:06:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:06:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:06:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:06:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:06:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:07:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:07:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:07:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:07:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:07:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:08:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:08:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:08:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:08:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:08:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:09:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:09:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:09:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:09:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:09:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:10:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:10:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:10:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:10:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:10:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:10:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:10:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 10, 0, 345509, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 10, 0, 345509, tzinfo=datetime.timezone.utc))
2025-04-10 22:10:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 10, 0, 345509, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 10, 0, 345509, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:10:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:10:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:10:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:10:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:10:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:10:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:10:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:11:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:11:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:11:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:11:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:11:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:11:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:12:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:12:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:12:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:12:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:12:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:13:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:13:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:13:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:13:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:13:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:14:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:14:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:14:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:14:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:14:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:15:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:15:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:15:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:15:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:15:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:15:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:15:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 15, 0, 368497, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 15, 0, 368497, tzinfo=datetime.timezone.utc))
2025-04-10 22:15:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 15, 0, 368497, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 15, 0, 368497, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:15:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:15:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:15:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:15:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:15:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:15:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:15:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:16:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:16:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:16:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:16:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:16:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:16:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:17:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:17:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:17:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:17:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:17:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:18:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:18:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:18:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:18:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:18:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:19:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:19:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:19:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:19:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:19:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:20:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:20:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:20:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:20:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:20:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:20:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:20:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 20, 0, 403295, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 20, 0, 403295, tzinfo=datetime.timezone.utc))
2025-04-10 22:20:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 20, 0, 403295, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 20, 0, 403295, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:20:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:20:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:20:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:20:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:20:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:20:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:20:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:21:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:21:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:21:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:21:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:21:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:21:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:22:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:22:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:22:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:22:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:22:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:23:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:23:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:23:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:23:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:23:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:24:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:24:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:24:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:24:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:24:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:25:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:25:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:25:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:25:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:25:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:25:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:25:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 25, 0, 445382, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 25, 0, 445382, tzinfo=datetime.timezone.utc))
2025-04-10 22:25:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 25, 0, 445382, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 25, 0, 445382, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:25:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:25:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:25:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:25:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:25:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:25:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:25:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:26:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:26:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:26:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:26:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:26:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:26:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:27:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:27:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:27:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:27:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:27:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:28:42 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:28:42 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:28:42 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:28:42 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:28:42 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:29:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:29:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:29:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:29:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:29:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:30:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:30:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:30:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:30:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:30:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:30:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:30:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 30, 0, 474301, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 30, 0, 474301, tzinfo=datetime.timezone.utc))
2025-04-10 22:30:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 30, 0, 474301, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 30, 0, 474301, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:30:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:30:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:30:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:30:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:30:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:30:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:30:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:31:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:31:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:31:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:31:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:31:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:31:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:32:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:32:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:32:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:32:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:32:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:33:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:33:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:33:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:33:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:33:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:34:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:34:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:34:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:34:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:34:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:35:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:35:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:35:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:35:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:35:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:35:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:35:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 35, 0, 505273, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 35, 0, 505273, tzinfo=datetime.timezone.utc))
2025-04-10 22:35:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 35, 0, 505273, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 35, 0, 505273, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:35:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:35:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:35:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:35:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:35:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:35:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:35:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:36:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:36:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:36:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:36:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:36:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:36:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:37:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:37:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:37:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:37:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:37:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:38:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:38:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:38:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:38:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:38:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:39:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:39:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:39:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:39:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:39:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:40:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:40:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:40:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:40:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:40:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:40:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:40:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 40, 0, 545467, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 40, 0, 545467, tzinfo=datetime.timezone.utc))
2025-04-10 22:40:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 40, 0, 545467, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 40, 0, 545467, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:40:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:40:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:40:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:40:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:40:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:40:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:40:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:41:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:41:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:41:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:41:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:41:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:41:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:42:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:42:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:42:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:42:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:42:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:43:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:43:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:43:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:43:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:43:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:44:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:44:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:44:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:44:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:44:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:45:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:45:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:45:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:45:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:45:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:45:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:45:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 45, 0, 582155, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 45, 0, 582155, tzinfo=datetime.timezone.utc))
2025-04-10 22:45:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 45, 0, 582155, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 45, 0, 582155, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:45:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:45:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:45:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:45:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:45:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:45:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:45:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:46:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:46:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:46:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:46:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:46:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:46:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:47:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:47:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:47:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:47:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:47:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:48:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:48:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:48:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:48:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:48:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:49:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:49:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:49:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:49:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:49:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:50:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:50:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:50:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:50:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:50:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:50:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:50:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 50, 0, 598921, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 50, 0, 598921, tzinfo=datetime.timezone.utc))
2025-04-10 22:50:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 50, 0, 598921, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 50, 0, 598921, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:50:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:50:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:50:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:50:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:50:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:50:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:50:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:51:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:51:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:51:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:51:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:51:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:51:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:52:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:52:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:52:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:52:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:52:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:53:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:53:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:53:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:53:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:53:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:54:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:54:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:54:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:54:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:54:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:55:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 22:55:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 22:55:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 22:55:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 22:55:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 22:55:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 22:55:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 55, 0, 633275, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 55, 0, 633275, tzinfo=datetime.timezone.utc))
2025-04-10 22:55:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 22, 55, 0, 633275, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 22, 55, 0, 633275, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:55:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 22:55:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 22:55:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:55:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:55:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:55:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:55:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:56:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 22:56:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:56:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:56:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:56:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:56:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:57:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:57:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:57:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:57:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:57:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:58:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:58:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:58:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:58:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:58:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:59:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 22:59:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 22:59:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 22:59:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 22:59:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:00:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:00:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:00:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:00:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:00:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:00:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:00:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 0, 0, 674482, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 0, 0, 674482, tzinfo=datetime.timezone.utc))
2025-04-10 23:00:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 0, 0, 674482, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 0, 0, 674482, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:00:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:00:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:00:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:00:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:00:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:00:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:00:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:01:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:01:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:01:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:01:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:01:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:01:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:02:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:02:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:02:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:02:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:02:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:03:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:03:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:03:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:03:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:03:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:04:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:04:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:04:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:04:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:04:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:05:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:05:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:05:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:05:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:05:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:05:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:05:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 5, 0, 700185, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 5, 0, 700185, tzinfo=datetime.timezone.utc))
2025-04-10 23:05:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 5, 0, 700185, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 5, 0, 700185, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:05:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:05:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:05:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:05:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:05:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:05:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:05:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:06:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:06:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:06:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:06:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:06:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:06:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:07:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:07:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:07:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:07:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:07:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:08:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:08:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:08:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:08:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:08:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:09:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:09:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:09:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:09:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:09:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:10:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:10:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:10:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:10:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:10:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:10:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:10:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 10, 0, 722618, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 10, 0, 722618, tzinfo=datetime.timezone.utc))
2025-04-10 23:10:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 10, 0, 722618, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 10, 0, 722618, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:10:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:10:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:10:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:10:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:10:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:10:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:10:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:11:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:11:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:11:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:11:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:11:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:11:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:12:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:12:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:12:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:12:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:12:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:13:43 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:13:43 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:13:43 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:13:43 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:13:43 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:14:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:14:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:14:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:14:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:14:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:15:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:15:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:15:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:15:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:15:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:15:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:15:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 15, 0, 761261, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 15, 0, 761261, tzinfo=datetime.timezone.utc))
2025-04-10 23:15:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 15, 0, 761261, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 15, 0, 761261, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:15:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:15:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:15:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:15:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:15:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:15:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:15:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:16:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:16:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:16:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:16:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:16:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:16:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:17:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:17:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:17:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:17:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:17:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:18:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:18:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:18:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:18:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:18:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:19:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:19:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:19:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:19:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:19:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:20:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:20:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:20:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:20:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:20:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:20:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:20:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 20, 0, 798174, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 20, 0, 798174, tzinfo=datetime.timezone.utc))
2025-04-10 23:20:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 20, 0, 798174, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 20, 0, 798174, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:20:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:20:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:20:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:20:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:20:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:20:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:20:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:21:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:21:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:21:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:21:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:21:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:21:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:22:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:22:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:22:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:22:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:22:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:23:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:23:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:23:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:23:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:23:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:24:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:24:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:24:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:24:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:24:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:25:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:25:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:25:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:25:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:25:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:25:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:25:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 25, 0, 829433, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 25, 0, 829433, tzinfo=datetime.timezone.utc))
2025-04-10 23:25:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 25, 0, 829433, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 25, 0, 829433, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:25:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:25:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:25:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:25:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:25:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:25:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:25:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:26:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:26:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:26:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:26:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:26:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:26:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:27:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:27:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:27:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:27:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:27:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:28:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:28:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:28:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:28:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:28:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:29:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:29:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:29:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:29:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:29:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:30:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:30:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:30:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:30:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:30:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:30:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:30:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 30, 0, 860466, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 30, 0, 860466, tzinfo=datetime.timezone.utc))
2025-04-10 23:30:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 30, 0, 860466, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 30, 0, 860466, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:30:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:30:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:30:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:30:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:30:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:30:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:30:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:31:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:31:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:31:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:31:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:31:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:31:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:32:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:32:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:32:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:32:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:32:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:33:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:33:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:33:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:33:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:33:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:34:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:34:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:34:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:34:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:34:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:35:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:35:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:35:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:35:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:35:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:35:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:35:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 35, 0, 892219, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 35, 0, 892219, tzinfo=datetime.timezone.utc))
2025-04-10 23:35:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 35, 0, 892219, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 35, 0, 892219, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:35:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:35:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:35:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:35:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:35:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:35:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:35:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:36:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
2025-04-10 23:36:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:36:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:36:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:36:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:36:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:37:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:37:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:37:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:37:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:37:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:38:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:38:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:38:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:38:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:38:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:39:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:39:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:39:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:39:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:39:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:40:00 [INFO] bot.services.voice_service: Voice service starting synchronized update cycle.
2025-04-10 23:40:00 [DEBUG] bot.services.voice_service: Updating voice channels for guild: Cookin' Books (1328126227013439601)
2025-04-10 23:40:00 [DEBUG] bot.services.voice_service: Skipping unit reset logic for guild 1328126227013439601 due to schema incompatibility.
2025-04-10 23:40:00 [DEBUG] data.db_manager: Fetching one DB query: SELECT voice_channel_id FROM server_settings WHERE guild_id = %s with params: (1328126227013439601,)
2025-04-10 23:40:00 [DEBUG] data.db_manager: Query fetch_one successful. Result found: No
2025-04-10 23:40:00 [DEBUG] bot.services.voice_service: No Total Units channel set for guild 1328126227013439601
2025-04-10 23:40:00 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 with params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 40, 0, 926062, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 40, 0, 926062, tzinfo=datetime.timezone.utc))
2025-04-10 23:40:00 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                 | Params: (1328126227013439601, datetime.datetime(2025, 4, 9, 23, 40, 0, 926062, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 4, 12, 23, 40, 0, 926062, tzinfo=datetime.timezone.utc)) | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:40:00 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                
2025-04-10 23:40:00 [ERROR] bot.services.voice_service: Error in voice update loop: name 'DatabaseQueryError' is not defined
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 141, in _update_all_guilds
    pending_bets: List[Dict] = await db_manager.fetch(pending_bets_query, (guild.id, start_window, end_window))
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/bot/data/db_manager.py", line 185, in fetch
    raise DatabaseQueryError(message=f"Query fetch failed: {e}", query=query, original_exception=e)
utils.errors.DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT bet_serial, event_id, league, team, opponent, game_start
                    FROM bets
                    WHERE guild_id = %s
                      AND bet_won IS NULL
                      AND bet_loss IS NULL
                      AND game_start IS NOT NULL
                      AND game_start BETWEEN %s AND %s
                

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/container/bot/services/voice_service.py", line 289, in _update_loop
    await self._update_all_guilds()
  File "/home/container/bot/services/voice_service.py", line 245, in _update_all_guilds
    except DatabaseQueryError as e:
           ^^^^^^^^^^^^^^^^^^
NameError: name 'DatabaseQueryError' is not defined
2025-04-10 23:40:44 [DEBUG] bot.services.game_service: Starting game polling cycle...
2025-04-10 23:40:44 [DEBUG] data.db_manager: Fetching DB query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 with params: None
2025-04-10 23:40:44 [ERROR] data.db_manager: Database query fetch failed: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                 | Params: None | Error: (1054, "Unknown column 'bet_won' in 'where clause'")
Traceback (most recent call last):
  File "/home/container/bot/data/db_manager.py", line 178, in fetch
    await cur.execute(query, params)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 239, in execute
    await self._query(query)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/cursors.py", line 457, in _query
    await conn.query(q)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 683, in _read_query_result
    await result.read()
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/container/.local/lib/python3.12/site-packages/aiomysql/connection.py", line 652, in _read_packet
    packet.raise_for_error()
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "/home/container/.local/lib/python3.12/site-packages/pymysql/err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'bet_won' in 'where clause'")
2025-04-10 23:40:44 [ERROR] utils.errors: DatabaseQueryError: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:40:44 [ERROR] bot.services.game_service: Database error during game polling loop: Query fetch failed: (1054, "Unknown column 'bet_won' in 'where clause'") | Query: 
                    SELECT DISTINCT league
                    FROM bets
                    WHERE bet_won IS NULL AND bet_loss IS NULL AND league IS NOT NULL
                
2025-04-10 23:41:00 [DEBUG] bot.services.voice_service: Voice service sleeping for 240.00 seconds until next 5-min mark.
